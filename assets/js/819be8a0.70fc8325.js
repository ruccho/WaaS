"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[62935],{72971:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"component-model/binding-generator/attributes","title":"Attributes","description":"By defining the interface that corresponds to the WIT in C# and giving the appropriate attributes, the Source Generator that comes with WaaS automatically generates convenient code for binding.","source":"@site/docs/component-model/binding-generator/attributes.mdx","sourceDirName":"component-model/binding-generator","slug":"/component-model/binding-generator/attributes","permalink":"/WaaS/component-model/binding-generator/attributes","draft":false,"unlisted":false,"editUrl":"https://github.com/ruccho/WaaS/tree/main/docs/docs/component-model/binding-generator/attributes.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Attributes","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Binding Generator","permalink":"/WaaS/component-model/binding-generator/"},"next":{"title":"Using Generated Code","permalink":"/WaaS/component-model/binding-generator/use-generated-code"}}');var t=i(74848),s=i(28453);const d={title:"Attributes",sidebar_position:1},c=void 0,o={},a=[{value:"Declare an interface",id:"declare-an-interface",level:3},{value:"Declare a function",id:"declare-a-function",level:3},{value:"Types that can be used in a function",id:"types-that-can-be-used-in-a-function",level:3},{value:"Defining a record",id:"defining-a-record",level:3},{value:"Defining a variant",id:"defining-a-variant",level:3},{value:"Generated members",id:"generated-members",level:4},{value:"Defining flags",id:"defining-flags",level:3},{value:"Defining an enum",id:"defining-an-enum",level:3},{value:"Using options",id:"using-options",level:3},{value:"Defining resource types",id:"defining-resource-types",level:3},{value:"Defining resource type members",id:"defining-resource-type-members",level:4}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",sup:"sup",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"By defining the interface that corresponds to the WIT in C# and giving the appropriate attributes, the Source Generator that comes with WaaS automatically generates convenient code for binding."}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["If you use ",(0,t.jsx)(n.a,{href:"/WaaS/component-model/wit2waas",children:(0,t.jsx)(n.code,{children:"wit2waas"})}),", attributes are automatically applied, so manual attribute assignment is not required.\nPlease refer to ",(0,t.jsx)(n.a,{href:"/WaaS/component-model/binding-generator/use-generated-code",children:"Use Generated Code"}),"."]})}),"\n",(0,t.jsx)(n.h3,{id:"declare-an-interface",children:"Declare an interface"}),"\n",(0,t.jsxs)(n.p,{children:["To generate bindings corresponding to WIT interfaces and worlds, declare a ",(0,t.jsx)(n.code,{children:"partial"})," ",(0,t.jsx)(n.code,{children:"interface"})," in C# and apply the ",(0,t.jsx)(n.code,{children:"[ComponentInterface]"})," attribute."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'using WaaS.ComponentModel.Binding;\n\n[ComponentInterface(@"env")]\npublic partial interface IEnv\n{\n    /* Define the interface members here */\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["For types and functions included in this ",(0,t.jsx)(n.code,{children:"interface"}),", define them as members of this ",(0,t.jsx)(n.code,{children:"interface"}),". Depending on the type of member to be defined, you need to apply the corresponding attribute."]}),"\n",(0,t.jsx)(n.h3,{id:"declare-a-function",children:"Declare a function"}),"\n",(0,t.jsxs)(n.p,{children:["To define a function included in the interface, define a method as a member of the interface and apply the ",(0,t.jsx)(n.code,{children:"[ComponentApi]"})," attribute."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'using WaaS.ComponentModel.Binding;\nusing System.Threading.Tasks;\n\n[ComponentInterface(@"env")]\npublic partial interface IEnv\n{\n    [ComponentApi(@"show-message")]\n    ValueTask ShowMessage(string @message);\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The argument of ",(0,t.jsx)(n.code,{children:"[ComponentApi]"})," must be the function name of WIT."]}),"\n",(0,t.jsxs)(n.li,{children:["The return type can be an ",(0,t.jsx)(n.a,{href:"https://github.com/dotnet/csharpstandard/blob/draft-v8/standard/expressions.md#12982-awaitable-expressions",children:"awaitable"})," type such as ValueTask.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"It is awaited by the caller and the result is obtained."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["For other types that can be used as arguments or return values, refer to ",(0,t.jsx)(n.a,{href:"#types-that-can-be-used-in-a-function",children:"Types that can be used in functions"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["When calling an ",(0,t.jsx)(n.code,{children:"awaitable"})," function, ",(0,t.jsx)(n.code,{children:"ExecutionContext.Invoke()"})," cannot be used.\nUse ",(0,t.jsx)(n.code,{children:"ExecutionContext.InvokeAsync()"}),"."]})}),"\n",(0,t.jsx)(n.h3,{id:"types-that-can-be-used-in-a-function",children:"Types that can be used in a function"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Component Model Type"}),(0,t.jsx)(n.th,{children:"C# Type"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"string"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bool"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bool"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"s8"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sbyte"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"u8"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"byte"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"s16"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"short"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"u16"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ushort"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"s32"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"int"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"u32"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uint"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"s64"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"long"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"u64"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ulong"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"f32"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"float"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"f64"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"double"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"char"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"WaaS.ComponentModel.Binding.ComponentChar"}),(0,t.jsx)(n.sup,{children:(0,t.jsx)(n.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"record"})}),(0,t.jsxs)(n.td,{children:["\u2192 ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.a,{href:"#defining-a-record",children:"Defining a record"})})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"variant"})}),(0,t.jsxs)(n.td,{children:["\u2192 ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.a,{href:"#defining-a-variant",children:"Defining a variant"})})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"list<T>"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"System.ReadOnlyMemory<T>"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"tuple<...>"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"System.ValueTuple<...>"})," or ",(0,t.jsx)(n.code,{children:"System.Tuple<...>"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"flags"})}),(0,t.jsxs)(n.td,{children:["\u2192 ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.a,{href:"#defining-flags",children:"Defining flags"})})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"enum"})}),(0,t.jsxs)(n.td,{children:["\u2192 ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.a,{href:"#defining-an-enum",children:"Defining an enum"})})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"options<T>"})}),(0,t.jsxs)(n.td,{children:["\u2192 ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.a,{href:"#using-options",children:"Using options"})})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"result<T, E>"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"WaaS.ComponentModel.Binding.Result<TOk, TError>"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"own<T>"})}),(0,t.jsxs)(n.td,{children:["\u2192 ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.a,{href:"#defining-resource-types",children:"Defining resource types"})})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"borrow<T>"})}),(0,t.jsxs)(n.td,{children:["\u2192 ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.a,{href:"#defining-resource-types",children:"Defining resource types"})})]})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"defining-a-record",children:"Defining a record"}),"\n",(0,t.jsxs)(n.p,{children:["To define a record, declare a ",(0,t.jsx)(n.code,{children:"record"})," in C# and apply the ",(0,t.jsx)(n.code,{children:"[ComponentRecord]"})," attribute."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'using WaaS.ComponentModel.Binding;\n\n[ComponentInterface(@"env")]\npublic partial interface IEnv\n{\n    [ComponentRecord]\n    public readonly partial struct Message\n    {\n        [ComponentField]\n        public (string, Sprite?) Speaker { get; private init; }\n        [ComponentField]\n        public string Text { get; private init; }\n        [ComponentField]\n        public MessageAttributes Attributes { get; private init; }\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Define a ",(0,t.jsx)(n.code,{children:"partial"})," ",(0,t.jsx)(n.code,{children:"class"})," or ",(0,t.jsx)(n.code,{children:"struct"})," as a member of the ",(0,t.jsx)(n.code,{children:"interface"})," with ",(0,t.jsx)(n.code,{children:"[ComponentInterface]"})," applied, and apply the ",(0,t.jsx)(n.code,{children:"[ComponentRecord]"})," attribute."]}),"\n",(0,t.jsxs)(n.li,{children:["Apply the ",(0,t.jsx)(n.code,{children:"[ComponentField]"})," attribute to the property."]}),"\n",(0,t.jsxs)(n.li,{children:["Apply the ",(0,t.jsx)(n.code,{children:"init"})," or ",(0,t.jsx)(n.code,{children:"set"})," accessor to the property. Accessibility doesn't matter."]}),"\n",(0,t.jsxs)(n.li,{children:["The property type uses the corresponding C# type for the Component Model type. The available types are the same as ",(0,t.jsx)(n.a,{href:"#types-that-can-be-used-in-a-function",children:"Types that can be used in a function"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"defining-a-variant",children:"Defining a variant"}),"\n",(0,t.jsxs)(n.p,{children:["To define a variant, declare a ",(0,t.jsx)(n.code,{children:"variant"})," in C# and apply the ",(0,t.jsx)(n.code,{children:"[ComponentVariant]"})," attribute."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'#enable nullable\nusing WaaS.ComponentModel.Binding;\n\n[ComponentInterface(@"env")]\npublic partial interface IEnv\n{\n    [ComponentVariant]\n    public readonly partial struct Sprite\n    {\n        [ComponentCase]\n        public MyGame.MySequencer.IEnv.WellKnownSprites? WellKnown { get; private init; }\n        [ComponentCase]\n        public string? Addressable { get; private init; }\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Defne a ",(0,t.jsx)(n.code,{children:"partial"})," ",(0,t.jsx)(n.code,{children:"class"})," or ",(0,t.jsx)(n.code,{children:"struct"})," as a member of the ",(0,t.jsx)(n.code,{children:"interface"})," with ",(0,t.jsx)(n.code,{children:"[ComponentInterface]"})," applied, and apply the ",(0,t.jsx)(n.code,{children:"[ComponentVariant]"})," attribute."]}),"\n",(0,t.jsxs)(n.li,{children:["Apply the ",(0,t.jsx)(n.code,{children:"[ComponentCase]"})," attribute to the property."]}),"\n",(0,t.jsxs)(n.li,{children:["Apply the ",(0,t.jsx)(n.code,{children:"init"})," or ",(0,t.jsx)(n.code,{children:"set"})," accessor to the property. Accessibility doesn't matter."]}),"\n",(0,t.jsxs)(n.li,{children:["The property type uses the corresponding C# type for the Component Model type. The available types are the same as ",(0,t.jsx)(n.a,{href:"#types-that-can-be-used-in-a-function",children:"Types that can be used in a function"}),".","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["In addition, it is recommended to make the property type ",(0,t.jsx)(n.code,{children:"nullable"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"generated-members",children:"Generated members"}),"\n",(0,t.jsx)(n.p,{children:"Members are generated to access the variant information."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// <auto-generated />\npartial interface IEnv\n{\n    partial struct Sprite\n    {\n        public VariantCase Case { get; private init; }\n\n        public enum VariantCase\n        {\n            WellKnown,\n            Addressable,\n        }\n    }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["By using the ",(0,t.jsx)(n.code,{children:"Case"})," property, you can get the type of the variant."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"return sprite.Case switch\n{\n    IEnv.Sprite.VariantCase.WellKnown => GetWellKnownSprite(sprite.WellKnown),\n    IEnv.Sprite.VariantCase.Addressable => GetAddressableSprite(sprite.Addressable),\n    _ => throw new IndexOutOfRangeException()\n};\n"})}),"\n",(0,t.jsx)(n.h3,{id:"defining-flags",children:"Defining flags"}),"\n",(0,t.jsxs)(n.p,{children:["To define flags, declare an ",(0,t.jsx)(n.code,{children:"enum"})," in C# and apply the ",(0,t.jsx)(n.code,{children:"[ComponentFlags]"})," attribute."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'using WaaS.ComponentModel.Binding;\nusing System;\n\n[ComponentInterface(@"env")]\npublic partial interface IEnv\n{\n    [Flags]\n    public enum MessageAttributes : byte\n    {\n        Fast = 1 << 0,\n        Large = 1 << 1,\n        Slow = 1 << 2,\n        Auto = 1 << 3,\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Define an ",(0,t.jsx)(n.code,{children:"enum"})," as a member of the ",(0,t.jsx)(n.code,{children:"interface"})," with ",(0,t.jsx)(n.code,{children:"[ComponentInterface]"})," applied, and apply the ",(0,t.jsx)(n.code,{children:"System.Flags"})," attribute."]}),"\n",(0,t.jsxs)(n.li,{children:["Use an integer type from ",(0,t.jsx)(n.code,{children:"byte"})," to ",(0,t.jsx)(n.code,{children:"uint"})," as the underlying type depending on the number of flags.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"byte"})," if there are 8 or fewer flags."]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"ushort"})," if there are 16 or fewer flags."]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"uint"})," for other cases."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["With WaaS, you cannot define a ",(0,t.jsx)(n.code,{children:"flags"})," type with more than 32 flags."]})}),"\n",(0,t.jsx)(n.h3,{id:"defining-an-enum",children:"Defining an enum"}),"\n",(0,t.jsxs)(n.p,{children:["To define an enum, declare an ",(0,t.jsx)(n.code,{children:"enum"})," in C#."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'using WaaS.ComponentModel.Binding;\nusing System;\n\n[ComponentInterface(@"env")]\npublic partial interface IEnv\n{\n    public enum WellKnownSprites\n    {\n        Unknown,\n        Hero,\n        Rival,\n        Professor,\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Define an ",(0,t.jsx)(n.code,{children:"enum"})," as a member of the ",(0,t.jsx)(n.code,{children:"interface"})," with ",(0,t.jsx)(n.code,{children:"[ComponentInterface]"})," applied."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"System.Flags"})," attribute cannot be applied."]}),"\n"]}),"\n",(0,t.jsxs)(n.admonition,{type:"warning",children:[(0,t.jsxs)(n.p,{children:["In the Component Model ",(0,t.jsx)(n.code,{children:"enum"}),", you cannot specify the values of the enumeration constants.\nIf you specify the values of the enumeration constants on the C# side, they are sorted in ascending order as unsigned integer representations, and indexes are assigned in order."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public enum WellKnownSprites : uint\n{\n    Unknown = 100, // '1' in Component Model\n    Hero = 200, // '2' in Component Model\n    Rival = 0, // '0' in Component Model\n    Professor = 1000, // '3' in Component Model\n}\n"})})]}),"\n",(0,t.jsx)(n.h3,{id:"using-options",children:"Using options"}),"\n",(0,t.jsxs)(n.p,{children:["To represent ",(0,t.jsx)(n.code,{children:"option<T>"})," in Component Model, use ",(0,t.jsx)(n.code,{children:"WaaS.ComponentModel.Binding.Option<T>"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["However, ",(0,t.jsx)(n.code,{children:"T?"})," can also be used in the following cases."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["When the type ",(0,t.jsx)(n.code,{children:"T"})," is a value type."]}),"\n",(0,t.jsxs)(n.li,{children:["When it is used directly as the type of a member of a record or variant.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Except when used as a type argument, such as an element of a tuple or list."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"defining-resource-types",children:"Defining resource types"}),"\n",(0,t.jsxs)(n.p,{children:["When a resource type is defined in an interface with the ",(0,t.jsx)(n.code,{children:"[ComponentInterface]"})," attribute, the following members are required in the C# interface."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'using WaaS.ComponentModel.Binding;\nusing WaaS.ComponentModel.Runtime;\nusing System;\n\n[ComponentInterface(@"env")]\npublic partial interface IEnv\n{\n    [ComponentResource(@"some-resource-name")]\n    public partial interface ISomeResourceImpl : IResourceImpl\n    {\n        /* ... */\n    }\n}\n\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Define a ",(0,t.jsx)(n.code,{children:"partial"})," ",(0,t.jsx)(n.code,{children:"interface"})," as a member of the ",(0,t.jsx)(n.code,{children:"interface"})," with the ",(0,t.jsx)(n.code,{children:"[ComponentInterface]"})," attribute applied."]}),"\n",(0,t.jsxs)(n.li,{children:["The interface inherits ",(0,t.jsx)(n.code,{children:"IResourceImpl"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["When using a resource type as a parameter or return value, use ",(0,t.jsx)(n.code,{children:"Owned<ISomeResourceImpl>"})," to own it, and ",(0,t.jsx)(n.code,{children:"Borrowed<ISomeResourceImpl>"})," to borrow it."]}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"Owned<ISomeResourceImpl>"})," is passed to C# code as an argument, you must handle ownership properly."]}),"\n",(0,t.jsx)(n.h4,{id:"defining-resource-type-members",children:"Defining resource type members"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'public partial interface ISomeResourceImpl : IResourceImpl\n{\n    [ComponentApi("[constructor]some-resource-name")]\n    ValueTask<Owned<ISomeResourceImpl>> SomeResource(/* ... */);\n    \n    [ComponentApi("[method]some-resource-name.some-method")]\n    ValueTask</* return type */> SomeMethod(Borrowed<ISomeResourceImpl> self, /* ... */);\n\n    [ComponentApi("[static]some-resource-name.some-static-method")]\n    ValueTask</* return type */> SomeStaticMethod(/* ... */);\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Define member methods with the ",(0,t.jsx)(n.code,{children:"[ComponentApi]"})," attribute applied to the resource type interface. The basic rules are the same as usual, but differ in the following points.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Specify the following names in the argument of ",(0,t.jsx)(n.code,{children:"[ComponentApi]"}),".","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Constructor: ",(0,t.jsx)(n.code,{children:"[constructor]resource name"})]}),"\n",(0,t.jsxs)(n.li,{children:["Method: ",(0,t.jsx)(n.code,{children:"[method]resource name.method name"})]}),"\n",(0,t.jsxs)(n.li,{children:["Static method: ",(0,t.jsx)(n.code,{children:"[static]resource name.method name"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["For the constructor, the return type is ",(0,t.jsx)(n.code,{children:"Owned<resource implementation type>"})," or an awaitable type that results in it."]}),"\n",(0,t.jsxs)(n.li,{children:["For instance methods, specify ",(0,t.jsx)(n.code,{children:"Borrowed<resource implementation type>"})," as the first argument."]}),"\n",(0,t.jsxs)(n.li,{children:["For details, refer to the ",(0,t.jsx)(n.a,{href:"https://github.com/WebAssembly/component-model/blob/main/design/mvp/WIT.md#item-resource",children:"WIT specification"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n","\n",(0,t.jsxs)(n.section,{"data-footnotes":!0,className:"footnotes",children:[(0,t.jsx)(n.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{id:"user-content-fn-1",children:["\n",(0,t.jsxs)(n.p,{children:["Component Model's character type is a ",(0,t.jsx)(n.a,{href:"https://unicode.org/glossary/#unicode_scalar_value",children:"Unicode Scalar Value"})," and cannot be used with C#'s ",(0,t.jsx)(n.code,{children:"char"}),". ",(0,t.jsx)(n.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>c});var r=i(96540);const t={},s=r.createContext(t);function d(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);